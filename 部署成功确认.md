# ðŸŽ‰ OpenList éƒ¨ç½²æˆåŠŸç¡®è®¤

## âœ… æ˜¯çš„ï¼ŒæˆåŠŸäº†ï¼

ä»Žä½ çš„ `docker ps` è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼š

```
CONTAINER ID   IMAGE                      STATUS          PORTS
8dbf14b1c978   openlist-backend:latest    Up 5 seconds    0.0.0.0:5244-5245->5244-5245/tcp
eb849f5c1459   openlist-frontend:latest   Up 35 minutes   0.0.0.0:66->80/tcp
```

### âœ¨ æˆåŠŸæ ‡å¿—ï¼š

1. âœ… **åŽç«¯å®¹å™¨** - çŠ¶æ€æ˜¯ `Up 5 seconds`ï¼ˆæ­£åœ¨è¿è¡Œï¼‰
2. âœ… **å‰ç«¯å®¹å™¨** - çŠ¶æ€æ˜¯ `Up 35 minutes`ï¼ˆæ­£åœ¨è¿è¡Œï¼‰
3. âœ… **ç«¯å£æ˜ å°„æ­£ç¡®**ï¼š
   - åŽç«¯ï¼š`0.0.0.0:5244-5245->5244-5245/tcp` âœ…
   - å‰ç«¯ï¼š`0.0.0.0:66->80/tcp` âœ…
4. âœ… **5245 ç«¯å£å·²æ˜ å°„** - ä¸å†æ˜¯ nullï¼Œå®å¡”é¢æ¿ä¸ä¼šå´©æºƒäº†ï¼

---

## ðŸŒ è®¿é—®ä½ çš„ OpenList

### å‰ç«¯ Web ç•Œé¢
```
http://70.39.205.183:66
```

### åŽç«¯ API
```
http://70.39.205.183:5244
```

### WebDAV æœåŠ¡
```
http://70.39.205.183:5245
```

---

## ðŸ” ä¸‹ä¸€æ­¥ï¼šåˆ›å»ºç®¡ç†å‘˜è´¦å·

1. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š**http://70.39.205.183:66**

2. å¦‚æžœæ˜¯é¦–æ¬¡è®¿é—®ï¼Œä½ ä¼šçœ‹åˆ°**åˆå§‹åŒ–è®¾ç½®é¡µé¢**

3. å¡«å†™ç®¡ç†å‘˜ä¿¡æ¯ï¼š
   - ç”¨æˆ·åï¼šè‡ªå®šä¹‰ï¼ˆä¾‹å¦‚ï¼šadminï¼‰
   - å¯†ç ï¼šè®¾ç½®ä¸€ä¸ªå¼ºå¯†ç 
   - ç¡®è®¤å¯†ç 

4. ç‚¹å‡»"åˆ›å»º"æˆ–"å¼€å§‹"æŒ‰é’®

5. åˆ›å»ºæˆåŠŸåŽç™»å½•ä½¿ç”¨

---

## âš ï¸ é‡è¦æé†’

### 1. é…ç½®äº‘æœåŠ¡å•†å®‰å…¨ç»„

ç¡®ä¿åœ¨äº‘æœåŠ¡å•†æŽ§åˆ¶å°å¼€æ”¾ä»¥ä¸‹ç«¯å£ï¼š

| ç«¯å£ | ç”¨é€” | æ˜¯å¦å¿…é¡» |
|------|------|---------|
| 66 | å‰ç«¯ Web ç•Œé¢ | âœ… å¿…é¡» |
| 5244 | åŽç«¯ API | âœ… å¿…é¡» |
| 5245 | WebDAV | âšª å¯é€‰ |

**æ“ä½œæ­¥éª¤**ï¼š
1. ç™»å½•äº‘æœåŠ¡å•†æŽ§åˆ¶å°
2. æ‰¾åˆ°æœåŠ¡å™¨ `70.39.205.183`
3. è¿›å…¥"å®‰å…¨ç»„"è®¾ç½®
4. æ·»åŠ å…¥ç«™è§„åˆ™ï¼š
   - ç«¯å£ï¼š66ã€5244ã€5245
   - åè®®ï¼šTCP
   - æ¥æºï¼š0.0.0.0/0ï¼ˆæˆ–æŒ‡å®š IPï¼‰

### 2. å®å¡”é¢æ¿æ£€æŸ¥

çŽ°åœ¨ä½ å¯ä»¥ï¼š
1. æ‰“å¼€å®å¡”é¢æ¿
2. è¿›å…¥ Docker ç®¡ç†
3. åº”è¯¥èƒ½æ­£å¸¸çœ‹åˆ°ä¸¤ä¸ªå®¹å™¨ä¿¡æ¯ï¼Œä¸ä¼šå´©æºƒäº†ï¼

---

## ðŸ“‹ å¸¸ç”¨ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹å®¹å™¨çŠ¶æ€
```bash
docker ps
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# åŽç«¯æ—¥å¿—
docker logs -f openlist-backend

# å‰ç«¯æ—¥å¿—
docker logs -f openlist-frontend

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œ
docker logs --tail 100 openlist-backend
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯åŽç«¯
docker restart openlist-backend

# é‡å¯å‰ç«¯
docker restart openlist-frontend

# é‡å¯æ‰€æœ‰
docker restart openlist-backend openlist-frontend
```

### åœæ­¢æœåŠ¡
```bash
docker stop openlist-backend openlist-frontend
```

### å¯åŠ¨æœåŠ¡
```bash
docker start openlist-backend openlist-frontend
```

### æŸ¥çœ‹ç«¯å£æ˜ å°„
```bash
docker port openlist-backend
docker port openlist-frontend
```

### è¿›å…¥å®¹å™¨
```bash
# è¿›å…¥åŽç«¯å®¹å™¨
docker exec -it openlist-backend sh

# æŸ¥çœ‹å¸®åŠ©
./openlist --help

# é€€å‡ºå®¹å™¨
exit
```

---

## ðŸ’¾ æ•°æ®å¤‡ä»½

### æ‰‹åŠ¨å¤‡ä»½
```bash
cd /opt/openlist
tar -czf backup-$(date +%Y%m%d_%H%M%S).tar.gz data/
```

### ä¸‹è½½å¤‡ä»½åˆ°æœ¬åœ°
```powershell
# åœ¨æœ¬åœ° PowerShell æ‰§è¡Œ
scp root@70.39.205.183:/opt/openlist/backup-*.tar.gz ./
```

### è‡ªåŠ¨å¤‡ä»½è„šæœ¬
```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > /opt/openlist/auto-backup.sh << 'EOF'
#!/bin/bash
BACKUP_DIR="/opt/openlist/backups"
DATE=$(date +%Y%m%d_%H%M%S)
mkdir -p $BACKUP_DIR
tar -czf $BACKUP_DIR/openlist-$DATE.tar.gz /opt/openlist/data/
# ä¿ç•™æœ€è¿‘ 7 å¤©çš„å¤‡ä»½
find $BACKUP_DIR -name "openlist-*.tar.gz" -mtime +7 -delete
echo "å¤‡ä»½å®Œæˆ: $BACKUP_DIR/openlist-$DATE.tar.gz"
EOF

chmod +x /opt/openlist/auto-backup.sh

# æ·»åŠ åˆ°å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©å‡Œæ™¨ 3 ç‚¹å¤‡ä»½ï¼‰
crontab -e
# æ·»åŠ è¿™ä¸€è¡Œï¼š
# 0 3 * * * /opt/openlist/auto-backup.sh
```

---

## ðŸ”„ æ›´æ–°éƒ¨ç½²

å½“æœ‰æ–°ç‰ˆæœ¬æ—¶ï¼š

```bash
# 1. å¤‡ä»½æ•°æ®
cd /opt/openlist
tar -czf backup-before-update.tar.gz data/

# 2. åœæ­¢å¹¶åˆ é™¤æ—§å®¹å™¨
docker stop openlist-backend openlist-frontend
docker rm openlist-backend openlist-frontend

# 3. åˆ é™¤æ—§é•œåƒ
docker rmi openlist-backend:latest openlist-frontend:latest

# 4. åŠ è½½æ–°é•œåƒ
docker load -i openlist-backend.tar
docker load -i openlist-frontend.tar

# 5. é‡æ–°å¯åŠ¨ï¼ˆä½¿ç”¨ç›¸åŒçš„å¯åŠ¨å‘½ä»¤ï¼‰
docker run -d \
  --name openlist-backend \
  --network openlist-network \
  -p 5244:5244 \
  -p 5245:5245 \
  -v /opt/openlist/data:/opt/openlist/data \
  -e UMASK=022 \
  --restart unless-stopped \
  openlist-backend:latest

docker run -d \
  --name openlist-frontend \
  --network openlist-network \
  -p 66:80 \
  --restart unless-stopped \
  openlist-frontend:latest
```

---

## ðŸ“Š ç›‘æŽ§å’Œç»´æŠ¤

### æŸ¥çœ‹èµ„æºä½¿ç”¨
```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats openlist-backend openlist-frontend

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
du -sh /opt/openlist/data

# æŸ¥çœ‹ Docker å ç”¨
docker system df
```

### æ¸…ç†æ— ç”¨èµ„æº
```bash
# æ¸…ç†åœæ­¢çš„å®¹å™¨
docker container prune -f

# æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ
docker image prune -a -f

# æ¸…ç† Docker ç¼“å­˜
docker system prune -a -f
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: æ— æ³•è®¿é—® http://70.39.205.183:66
**æ£€æŸ¥æ¸…å•**ï¼š
1. å®¹å™¨æ˜¯å¦è¿è¡Œï¼š`docker ps`
2. é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ï¼š`ufw status`
3. äº‘æœåŠ¡å•†å®‰å…¨ç»„æ˜¯å¦é…ç½®
4. æœ¬åœ°æµ‹è¯•ï¼š`curl http://localhost:66`

### Q2: å¿˜è®°ç®¡ç†å‘˜å¯†ç 
```bash
docker exec -it openlist-backend sh
./openlist admin set admin æ–°å¯†ç 
exit
```

### Q3: æ•°æ®åœ¨å“ªé‡Œï¼Ÿ
```
/opt/openlist/data/
â”œâ”€â”€ data.db          # æ•°æ®åº“
â”œâ”€â”€ config.json      # é…ç½®æ–‡ä»¶
â”œâ”€â”€ temp/            # ä¸´æ—¶æ–‡ä»¶
â””â”€â”€ log/             # æ—¥å¿—æ–‡ä»¶
```

### Q4: å¦‚ä½•æ›´æ”¹ç«¯å£ï¼Ÿ
é‡æ–°åˆ›å»ºå®¹å™¨æ—¶ä¿®æ”¹ `-p` å‚æ•°ï¼š
```bash
-p æ–°ç«¯å£:80        # å‰ç«¯
-p æ–°ç«¯å£:5244      # åŽç«¯
```

---

## ðŸŽŠ æ­å–œï¼éƒ¨ç½²å®Œæˆï¼

ä½ çš„ OpenList å·²ç»æˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œï¼

**çŽ°åœ¨å°±åŽ»è®¿é—®å§**ï¼š
```
http://70.39.205.183:66
```

åˆ›å»ºä½ çš„ç®¡ç†å‘˜è´¦å·ï¼Œå¼€å§‹ä½¿ç”¨ä½ çš„ç§äººäº‘ç›˜ï¼ðŸš€

---

## ðŸ“ž èŽ·å–å¸®åŠ©

- æŸ¥çœ‹æ—¥å¿—ï¼š`docker logs -f openlist-backend`
- å®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/OpenListTeam/OpenList
- æœ¬åœ°æ–‡æ¡£ï¼š`Dockeréƒ¨ç½²å®Œæ•´æµç¨‹.md`

---

**äº«å—ä½ çš„ OpenListï¼** ðŸŽ‰

