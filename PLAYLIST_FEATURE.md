# 音频播放列表功能实现

## 功能概述

已实现一个全局音频播放器，具备以下功能：

### 1. 播放列表管理
- ✅ 添加音频到播放列表（新添加的音频排在前面）
- ✅ 长按拖动调整播放顺序（通过拖拽实现）
- ✅ 删除播放列表中的音频
- ✅ 显示当前播放的音频

### 2. 播放模式
- ✅ 列表循环播放
- ✅ 随机播放
- ✅ 单曲循环

### 3. 睡眠定时功能
- ✅ 预设定时选项：15/30/45/60分钟
- ✅ 自定义定时时长
- ✅ 实时显示倒计时
- ✅ 定时结束自动停止播放

### 4. 访问方式
- ✅ 页面右下角浮动按钮（显示播放列表数量）
- ✅ 点击按钮打开播放器模态框

## 使用说明

### 添加音频到播放列表
1. 浏览音频文件时，点击"添加到播放列表"按钮
2. 音频会被添加到播放列表的最前面

### 调整播放顺序
1. 打开播放器（点击右下角浮动按钮）
2. 在播放列表中，长按并拖动音频项
3. 拖动到目标位置后松开

### 切换播放模式
- 点击播放器中的播放模式按钮
- 循环切换：列表循环 → 随机播放 → 单曲循环

### 设置睡眠定时
1. 点击"睡眠定时"按钮
2. 选择预设时长或输入自定义时长
3. 定时开始后会显示倒计时
4. 可随时取消定时

## 技术实现

### 新增文件
1. `src/store/playlist.ts` - 播放列表状态管理
2. `src/components/GlobalAudioPlayer.tsx` - 全局播放器组件
3. `src/components/FloatingPlayerButton.tsx` - 浮动按钮组件

### 修改文件
1. `src/pages/home/Layout.tsx` - 添加浮动按钮
2. `src/pages/home/previews/audio.tsx` - 添加"添加到播放列表"功能
3. `src/components/index.ts` - 导出新组件
4. `src/store/index.ts` - 导出播放列表store

## 播放器特性
- 复用现有的 APlayer 组件
- 支持歌词显示（如果有 .lrc 文件）
- 支持封面显示
- 支持媒体会话控制（系统媒体控制）
- 响应式设计，适配移动端

## 注意事项
- 播放列表保存在内存中，刷新页面会清空
- 拖拽功能在移动端可能需要长按触发
- 睡眠定时精度为1秒
